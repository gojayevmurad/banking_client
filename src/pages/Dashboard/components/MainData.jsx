import React from "react";
import ReactECharts from "echarts-for-react";
import { formatMoney, ChevronDown, ChevronUp } from "../../../utils";
import CardItem from "../../../components/CardItem/CardItem";

import { useSelector } from "react-redux";

const defaultCard = {
  bgColor: "purple",
  color: "white",
};

const MainData = ({ incomes, expenses }) => {
  const chartsLoading = useSelector(
    (state) => state.transactions.lastWeek.loading
  );
  const mainCard = useSelector((state) => state.cards.cards);

  const weeklyData = {
    income: {
      increase: true,
      value: incomes.total,
      percent: 0.5,
    },
    expense: {
      increase: false,
      value: expenses.total,
      percent: 0.5,
    },
  };

  const sameOptions = {
    color: ["#6160dc"],
    xAxis: {
      type: "category",
      data: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
      show: false,
    },
    yAxis: {
      type: "value",
      show: false,
    },
    tooltip: {
      trigger: "axis",
      textStyle: {
        color: "#6160dc",
      },
    },
    grid: {
      left: "0%",
      right: "0%",
      top: "10%",
      bottom: "10%",
    },
  };

  const expenseOptions = {
    series: [
      {
        data: expenses.data,
        type: "line",
        smooth: true,
        symbolSize: 0,
        lineStyle: {
          width: 3,
        },
      },
    ],
  };

  const incomeOptions = {
    series: [
      {
        data: incomes.data,
        type: "line",
        smooth: true,
        symbolSize: 0,
        lineStyle: {
          width: 3,
        },
      },
    ],
  };

  return (
    <div className="main_data">
      <CardItem
        cardData={
          mainCard.data && mainCard.data.length ? mainCard.data[0] : defaultCard
        }
        loading={mainCard.loading}
      />
      <div className="main_data--income">
        <div>
          <div>
            <div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 64 64"
                height={45}
                width={45}
                id="income"
              >
                <path
                  fill="#eef0ef"
                  d="M18.11 28.38v3.24H15.38a.99.99 0 0 0-.99-.94h-3.3V29.31h3.3a.988.988 0 0 0 .99-.93zM40.92 28.38v3.24H38.83a1 1 0 0 0-.99-.94H23.04a.983.983 0 0 0-.99.94H20.11V28.38h1.93a.988.988 0 0 0 .99.93h14.8a.988.988 0 0 0 .99-.93zM53.79 29.31v1.37H46.47a.983.983 0 0 0-.99.94H42.92V28.38h2.56a.981.981 0 0 0 .99.93z"
                ></path>
                <path
                  fill="#464651"
                  d="M57.4 38.16H52.2a3.5 3.5 0 0 0-3.5 3.49v.19l-.74-.34-2.52-1.19-.02-.01c0-.01-.01-.01-.02-.02l-.06-.03a16.416 16.416 0 0 0-3.76-1.54 9.766 9.766 0 0 0-2.28-.26c-2.39 0-6.38.66-8.29 2.45l-7.95-1.51a3.991 3.991 0 0 0-.79-.08 4.074 4.074 0 0 0-4.01 3.33 1.678 1.678 0 0 0-.04.44l-9.4-4.25a3.984 3.984 0 0 0-3.07-.13 3.917 3.917 0 0 0-2.24 2.04 3.758 3.758 0 0 0-.39 1.7 3.953 3.953 0 0 0 2.3 3.62L25.98 57.62a3.648 3.648 0 0 0 1.62.39 3.287 3.287 0 0 0 .54-.05l10.92-1.64a3.179 3.179 0 0 1 .76.01.528.528 0 0 0 .12.01l8.76.26v.53a3.5 3.5 0 0 0 3.5 3.49h5.2a3.491 3.491 0 0 0 3.48-3.49V41.65A3.491 3.491 0 0 0 57.4 38.16zM45.91 40.88a.8.8 0 0 1 .03.15c-.01-.04-.02-.07-.03-.11zM48.7 54.6l-8.64-.25a4.794 4.794 0 0 0-1.26-.01L27.84 55.99a1.487 1.487 0 0 1-.9-.13L6.36 44.29c-.03-.02-.06-.03-.09-.05a1.906 1.906 0 0 1-1.15-1.8 1.935 1.935 0 0 1 .18-.83 2 2 0 0 1 1.14-1.03 1.925 1.925 0 0 1 1.54.07L18.8 45.54c.04.06.06.12.1.17a3.95 3.95 0 0 0 2.56 1.7l11.4 2.95a1.09 1.09 0 0 0 .26.03 1 1 0 0 0 .24-1.97L21.88 45.46a2.069 2.069 0 0 1-1.66-2.44 2.063 2.063 0 0 1 2.46-1.67l8.5 1.62a.986.986 0 0 0 .96-.37c.92-1.17 4.19-2.15 7.16-2.15a10.139 10.139 0 0 1 5.11 1.57.044.044 0 0 0 .03.01.207.207 0 0 0 .1.06l2.57 1.22q.84.39 1.59.72zM55.79 4.38v27.3a1 1 0 0 1-1 1H46.47a1 1 0 0 1-1-1 .127.127 0 0 1 .01-.06.983.983 0 0 1 .99-.94h7.32V29.31H46.47a.981.981 0 0 1-.99-.93.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h7.32V5.38H11.09V27.31h3.3a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07.988.988 0 0 1-.99.93h-3.3v1.37h3.3a.99.99 0 0 1 .99.94.127.127 0 0 1 .01.06 1 1 0 0 1-1 1h-4.3a.99.99 0 0 1-1-1V4.38a.99.99 0 0 1 1-1h44.7A1 1 0 0 1 55.79 4.38z"
                ></path>
                <path
                  fill="#fff"
                  d="M11.09 5.38V27.31h3.3a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07h2.73V26.4a1 1 0 0 1 2 0v1.98h1.93a.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h14.8a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07h2.09V25.89a1 1 0 0 1 2 0v2.49h2.57a.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h7.32V5.38zM32.93 25.77a9.49 9.49 0 1 1 9.49-9.49A9.492 9.492 0 0 1 32.93 25.77zM48.7 44.03V54.6l-8.64-.25a4.794 4.794 0 0 0-1.26-.01L27.84 55.99a1.487 1.487 0 0 1-.9-.13L6.36 44.29c-.03-.02-.06-.03-.09-.05a1.906 1.906 0 0 1-1.15-1.8 1.935 1.935 0 0 1 .18-.83 2 2 0 0 1 1.14-1.03 1.925 1.925 0 0 1 1.54.07L18.8 45.54c.04.06.06.12.1.17a3.95 3.95 0 0 0 2.56 1.7l11.4 2.95a1.09 1.09 0 0 0 .26.03 1 1 0 0 0 .24-1.97L21.88 45.46a2.069 2.069 0 0 1-1.66-2.44 2.063 2.063 0 0 1 2.46-1.67l8.5 1.62a.986.986 0 0 0 .96-.37c.92-1.17 4.19-2.15 7.16-2.15a10.139 10.139 0 0 1 5.11 1.57.044.044 0 0 0 .03.01.207.207 0 0 0 .1.06l2.57 1.22Q47.95 43.7 48.7 44.03z"
                ></path>
                <path
                  fill="#464651"
                  d="M46.28 34.48l-3.67 3.51c-.05.04-.1.06-.15.1s-.1.07-.16.1a1.021 1.021 0 0 1-.38.07h-.04a.654.654 0 0 1-.18-.04.592.592 0 0 1-.19-.05.6.6 0 0 1-.13-.09.669.669 0 0 1-.19-.14.035.035 0 0 0-.02-.01l-3.11-3.51a1.008 1.008 0 0 1 .1-1.41.985.985 0 0 1 1.4.09l1.36 1.52V28.38h-.01V25.89a1 1 0 0 1 2 0v2.49h.01v6.55l1.99-1.89a.975.975 0 0 1 .92-.25.941.941 0 0 1 .49.28A.987.987 0 0 1 46.28 34.48zM32.93 6.79a9.49 9.49 0 1 0 9.49 9.49A9.5 9.5 0 0 0 32.93 6.79zm0 16.98h-.07a7.49 7.49 0 0 1 .07-14.98H33a7.49 7.49 0 0 1-.07 14.98z"
                ></path>
                <path
                  fill="#464651"
                  d="M38.83 28.31a.17.17 0 0 1-.01.07.988.988 0 0 1-.99.93H23.03a.988.988 0 0 1-.99-.93.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h14.8a.989.989 0 0 1 1 1zM38.84 31.68a1 1 0 0 1-.8.98 1.231 1.231 0 0 1-.2.02H23.04a1.124 1.124 0 0 1-.2-.02.99.99 0 0 1-.8-.98.127.127 0 0 1 .01-.06.983.983 0 0 1 .99-.94h14.8a1 1 0 0 1 .99.94A.127.127 0 0 1 38.84 31.68zM35.822 18.17a2.89 2.89 0 0 1-1.89 2.71v.57a1 1 0 1 1-2 0v-.57a2.89 2.89 0 0 1-1.89-2.71 1 1 0 0 1 1-1 .975.975 0 0 1 .56.17 1.022 1.022 0 0 1 .44.83.89.89 0 1 0 .89-.89 2.753 2.753 0 0 1-1.18-.26 2.883 2.883 0 0 1 .18-5.34v-.57a1 1 0 0 1 2 0v.57a2.9 2.9 0 0 1 1.89 2.71 1 1 0 0 1-1 1 .975.975 0 0 1-.56-.17 1.022 1.022 0 0 1-.44-.83.89.89 0 1 0-.89.89 2.753 2.753 0 0 1 1.18.26A2.879 2.879 0 0 1 35.822 18.17z"
                ></path>
                <path
                  fill="#00a389"
                  d="M33,8.79h-.07a7.49,7.49,0,0,0-.07,14.98h.07A7.49,7.49,0,0,0,33,8.79Zm-.07,6.49a2.753,2.753,0,0,1,1.18.26,2.883,2.883,0,0,1-.18,5.34v.57a1,1,0,1,1-2,0v-.57a2.89,2.89,0,0,1-1.89-2.71,1,1,0,0,1,1-1,.975.975,0,0,1,.56.17,1.022,1.022,0,0,1,.44.83.89.89,0,1,0,.89-.89,2.753,2.753,0,0,1-1.18-.26,2.883,2.883,0,0,1,.18-5.34v-.57a1,1,0,0,1,2,0v.57a2.9,2.9,0,0,1,1.89,2.71,1,1,0,0,1-1,1,.975.975,0,0,1-.56-.17,1.022,1.022,0,0,1-.44-.83.89.89,0,1,0-.89.89Z"
                ></path>
                <path
                  fill="#464651"
                  d="M23.48,35l-3.65,3.47-.03.03a.653.653,0,0,1-.15.1.7.7,0,0,1-.16.1,1,1,0,0,1-.38.08h-.05a1.244,1.244,0,0,1-.16-.04,1.17,1.17,0,0,1-.2-.05.6.6,0,0,1-.13-.09.847.847,0,0,1-.19-.14c0-.01-.01-.01-.02-.02l-3.1-3.5a1,1,0,0,1,1.5-1.33l1.35,1.53V26.4a1,1,0,0,1,2,0v9.05l1.99-1.9A1,1,0,0,1,23.48,35Z"
                ></path>
              </svg>
            </div>
            <div className="income-details">
              {/* <p>Gəlir</p> */}
              <span>${formatMoney(weeklyData.income.value)}</span>
            </div>
          </div>
          <div>
            <div>
              {weeklyData.income.increase ? <ChevronUp /> : <ChevronDown />}
              {weeklyData.income.increase ? (
                <p className="green">+{weeklyData.income.percent}%</p>
              ) : (
                <p className="red">-{weeklyData.income.percent}%</p>
              )}
            </div>
            <span>son həftə</span>
          </div>
        </div>
        <div>
          <ReactECharts
            style={{ width: "100%", height: "100%" }}
            option={{
              ...incomeOptions,
              ...sameOptions,
            }}
            showLoading={chartsLoading}
          />
        </div>
      </div>
      <div className="main_data--expense">
        <div>
          <div>
            <div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 64 64"
                height={45}
                width={45}
                id="income"
              >
                <path
                  fill="#eef0ef"
                  d="M18.11 28.38v3.24H15.38a.99.99 0 0 0-.99-.94h-3.3V29.31h3.3a.988.988 0 0 0 .99-.93zM40.92 28.38v3.24H38.83a1 1 0 0 0-.99-.94H23.04a.983.983 0 0 0-.99.94H20.11V28.38h1.93a.988.988 0 0 0 .99.93h14.8a.988.988 0 0 0 .99-.93zM53.79 29.31v1.37H46.47a.983.983 0 0 0-.99.94H42.92V28.38h2.56a.981.981 0 0 0 .99.93z"
                ></path>
                <path
                  fill="#464651"
                  d="M57.4 38.16H52.2a3.5 3.5 0 0 0-3.5 3.49v.19l-.74-.34-2.52-1.19-.02-.01c0-.01-.01-.01-.02-.02l-.06-.03a16.416 16.416 0 0 0-3.76-1.54 9.766 9.766 0 0 0-2.28-.26c-2.39 0-6.38.66-8.29 2.45l-7.95-1.51a3.991 3.991 0 0 0-.79-.08 4.074 4.074 0 0 0-4.01 3.33 1.678 1.678 0 0 0-.04.44l-9.4-4.25a3.984 3.984 0 0 0-3.07-.13 3.917 3.917 0 0 0-2.24 2.04 3.758 3.758 0 0 0-.39 1.7 3.953 3.953 0 0 0 2.3 3.62L25.98 57.62a3.648 3.648 0 0 0 1.62.39 3.287 3.287 0 0 0 .54-.05l10.92-1.64a3.179 3.179 0 0 1 .76.01.528.528 0 0 0 .12.01l8.76.26v.53a3.5 3.5 0 0 0 3.5 3.49h5.2a3.491 3.491 0 0 0 3.48-3.49V41.65A3.491 3.491 0 0 0 57.4 38.16zM45.91 40.88a.8.8 0 0 1 .03.15c-.01-.04-.02-.07-.03-.11zM48.7 54.6l-8.64-.25a4.794 4.794 0 0 0-1.26-.01L27.84 55.99a1.487 1.487 0 0 1-.9-.13L6.36 44.29c-.03-.02-.06-.03-.09-.05a1.906 1.906 0 0 1-1.15-1.8 1.935 1.935 0 0 1 .18-.83 2 2 0 0 1 1.14-1.03 1.925 1.925 0 0 1 1.54.07L18.8 45.54c.04.06.06.12.1.17a3.95 3.95 0 0 0 2.56 1.7l11.4 2.95a1.09 1.09 0 0 0 .26.03 1 1 0 0 0 .24-1.97L21.88 45.46a2.069 2.069 0 0 1-1.66-2.44 2.063 2.063 0 0 1 2.46-1.67l8.5 1.62a.986.986 0 0 0 .96-.37c.92-1.17 4.19-2.15 7.16-2.15a10.139 10.139 0 0 1 5.11 1.57.044.044 0 0 0 .03.01.207.207 0 0 0 .1.06l2.57 1.22q.84.39 1.59.72zM55.79 4.38v27.3a1 1 0 0 1-1 1H46.47a1 1 0 0 1-1-1 .127.127 0 0 1 .01-.06.983.983 0 0 1 .99-.94h7.32V29.31H46.47a.981.981 0 0 1-.99-.93.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h7.32V5.38H11.09V27.31h3.3a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07.988.988 0 0 1-.99.93h-3.3v1.37h3.3a.99.99 0 0 1 .99.94.127.127 0 0 1 .01.06 1 1 0 0 1-1 1h-4.3a.99.99 0 0 1-1-1V4.38a.99.99 0 0 1 1-1h44.7A1 1 0 0 1 55.79 4.38z"
                ></path>
                <path
                  fill="#fff"
                  d="M11.09 5.38V27.31h3.3a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07h2.73V26.4a1 1 0 0 1 2 0v1.98h1.93a.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h14.8a.989.989 0 0 1 1 1 .17.17 0 0 1-.01.07h2.09V25.89a1 1 0 0 1 2 0v2.49h2.57a.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h7.32V5.38zM32.93 25.77a9.49 9.49 0 1 1 9.49-9.49A9.492 9.492 0 0 1 32.93 25.77zM48.7 44.03V54.6l-8.64-.25a4.794 4.794 0 0 0-1.26-.01L27.84 55.99a1.487 1.487 0 0 1-.9-.13L6.36 44.29c-.03-.02-.06-.03-.09-.05a1.906 1.906 0 0 1-1.15-1.8 1.935 1.935 0 0 1 .18-.83 2 2 0 0 1 1.14-1.03 1.925 1.925 0 0 1 1.54.07L18.8 45.54c.04.06.06.12.1.17a3.95 3.95 0 0 0 2.56 1.7l11.4 2.95a1.09 1.09 0 0 0 .26.03 1 1 0 0 0 .24-1.97L21.88 45.46a2.069 2.069 0 0 1-1.66-2.44 2.063 2.063 0 0 1 2.46-1.67l8.5 1.62a.986.986 0 0 0 .96-.37c.92-1.17 4.19-2.15 7.16-2.15a10.139 10.139 0 0 1 5.11 1.57.044.044 0 0 0 .03.01.207.207 0 0 0 .1.06l2.57 1.22Q47.95 43.7 48.7 44.03z"
                ></path>
                <path
                  fill="#464651"
                  d="M46.28 34.48l-3.67 3.51c-.05.04-.1.06-.15.1s-.1.07-.16.1a1.021 1.021 0 0 1-.38.07h-.04a.654.654 0 0 1-.18-.04.592.592 0 0 1-.19-.05.6.6 0 0 1-.13-.09.669.669 0 0 1-.19-.14.035.035 0 0 0-.02-.01l-3.11-3.51a1.008 1.008 0 0 1 .1-1.41.985.985 0 0 1 1.4.09l1.36 1.52V28.38h-.01V25.89a1 1 0 0 1 2 0v2.49h.01v6.55l1.99-1.89a.975.975 0 0 1 .92-.25.941.941 0 0 1 .49.28A.987.987 0 0 1 46.28 34.48zM32.93 6.79a9.49 9.49 0 1 0 9.49 9.49A9.5 9.5 0 0 0 32.93 6.79zm0 16.98h-.07a7.49 7.49 0 0 1 .07-14.98H33a7.49 7.49 0 0 1-.07 14.98z"
                ></path>
                <path
                  fill="#464651"
                  d="M38.83 28.31a.17.17 0 0 1-.01.07.988.988 0 0 1-.99.93H23.03a.988.988 0 0 1-.99-.93.17.17 0 0 1-.01-.07.989.989 0 0 1 1-1h14.8a.989.989 0 0 1 1 1zM38.84 31.68a1 1 0 0 1-.8.98 1.231 1.231 0 0 1-.2.02H23.04a1.124 1.124 0 0 1-.2-.02.99.99 0 0 1-.8-.98.127.127 0 0 1 .01-.06.983.983 0 0 1 .99-.94h14.8a1 1 0 0 1 .99.94A.127.127 0 0 1 38.84 31.68zM35.822 18.17a2.89 2.89 0 0 1-1.89 2.71v.57a1 1 0 1 1-2 0v-.57a2.89 2.89 0 0 1-1.89-2.71 1 1 0 0 1 1-1 .975.975 0 0 1 .56.17 1.022 1.022 0 0 1 .44.83.89.89 0 1 0 .89-.89 2.753 2.753 0 0 1-1.18-.26 2.883 2.883 0 0 1 .18-5.34v-.57a1 1 0 0 1 2 0v.57a2.9 2.9 0 0 1 1.89 2.71 1 1 0 0 1-1 1 .975.975 0 0 1-.56-.17 1.022 1.022 0 0 1-.44-.83.89.89 0 1 0-.89.89 2.753 2.753 0 0 1 1.18.26A2.879 2.879 0 0 1 35.822 18.17z"
                ></path>
                <path
                  fill="#ff4a55"
                  d="M33,8.79h-.07a7.49,7.49,0,0,0-.07,14.98h.07A7.49,7.49,0,0,0,33,8.79Zm-.07,6.49a2.753,2.753,0,0,1,1.18.26,2.883,2.883,0,0,1-.18,5.34v.57a1,1,0,1,1-2,0v-.57a2.89,2.89,0,0,1-1.89-2.71,1,1,0,0,1,1-1,.975.975,0,0,1,.56.17,1.022,1.022,0,0,1,.44.83.89.89,0,1,0,.89-.89,2.753,2.753,0,0,1-1.18-.26,2.883,2.883,0,0,1,.18-5.34v-.57a1,1,0,0,1,2,0v.57a2.9,2.9,0,0,1,1.89,2.71,1,1,0,0,1-1,1,.975.975,0,0,1-.56-.17,1.022,1.022,0,0,1-.44-.83.89.89,0,1,0-.89.89Z"
                ></path>
                <path
                  fill="#464651"
                  d="M23.48,35l-3.65,3.47-.03.03a.653.653,0,0,1-.15.1.7.7,0,0,1-.16.1,1,1,0,0,1-.38.08h-.05a1.244,1.244,0,0,1-.16-.04,1.17,1.17,0,0,1-.2-.05.6.6,0,0,1-.13-.09.847.847,0,0,1-.19-.14c0-.01-.01-.01-.02-.02l-3.1-3.5a1,1,0,0,1,1.5-1.33l1.35,1.53V26.4a1,1,0,0,1,2,0v9.05l1.99-1.9A1,1,0,0,1,23.48,35Z"
                ></path>
              </svg>
            </div>
            <div className="expense-details">
              <p>Xərc</p>
              <span>${formatMoney(weeklyData.expense.value)}</span>
            </div>
          </div>
          <div>
            <div>
              {weeklyData.expense.increase ? <ChevronUp /> : <ChevronDown />}
              {weeklyData.expense.increase ? (
                <p className="green">+{weeklyData.expense.percent}%</p>
              ) : (
                <p className="red">-{weeklyData.expense.percent}%</p>
              )}
            </div>
            <span>son həftə</span>
          </div>
        </div>
        <div>
          <ReactECharts
            style={{ width: "100%", height: "100%" }}
            option={{ ...sameOptions, ...expenseOptions }}
            showLoading={chartsLoading}
          />
        </div>
      </div>
    </div>
  );
};

export default MainData;
